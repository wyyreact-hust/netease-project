(self.webpackChunkreact_netease_player=self.webpackChunkreact_netease_player||[]).push([[890],{6663:(e,r,t)=>{"use strict";t.d(r,{Z:()=>i});var n=t(7757),s=t.n(n),c=t(8926),o=t.n(c),a=t(5485);const i={getAlbum:function(){var e=o()(s().mark((function e(r){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.Z)({url:"/album",params:{id:r}});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()}},7131:(e,r,t)=>{"use strict";t.d(r,{Z:()=>l});var n=t(7757),s=t.n(n),c=t(8926),o=t.n(c),a=t(5485),i=t(4760),u=t(2689);const l={searchHot:function(){var e=o()(s().mark((function e(){var r,t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.Z)({url:"/search/hot"});case 2:return t=e.sent,e.abrupt("return",null==t||null===(r=t.result)||void 0===r?void 0:r.hots);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),searchSuggest:function(){var e=o()(s().mark((function e(r){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.keywords,e.next=3,(0,a.Z)({url:"/search/suggest",params:{keywords:t}});case 3:return n=e.sent,e.abrupt("return",n.result);case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),search:function(){var e=o()(s().mark((function e(r){var t,n,c,o,l,d,m,f;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.keywords,n=r.type,c=void 0===n?i.xb.MUSIC:n,o=r.limit,l=void 0===o?u.IV:o,d=r.offset,m=void 0===d?0:d,e.next=3,(0,a.Z)({url:"/search",params:{keywords:t,type:c,limit:l,offset:m}});case 3:return f=e.sent,e.abrupt("return",f.result);case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()}},743:(e,r,t)=>{"use strict";t.d(r,{Z:()=>o});var n=t(3038),s=t.n(n),c=t(5977);const o=function(){var e=(0,c.TH)().search,r={};return console.log(r),console.log(e),e.substr(1).split("&").reduce((function(e,r){var t=r.split("="),n=s()(t,2),c=n[0],o=n[1];return e[c]=decodeURIComponent(o),e}),r),r}},2890:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>B});var n=t(5893),s=t(7294),c=t(1679),o=t(7757),a=t.n(o),i=t(8926),u=t.n(i),l=t(3038),d=t.n(l),m=t(5977),f=t(4184),p=t.n(f);const v="src-pages-Discovery-Recommendation-Searcher-Words-style-module__root--3y0CF",h="src-pages-Discovery-Recommendation-Searcher-Words-style-module__title--2XMQ5",y="src-pages-Discovery-Recommendation-Searcher-Words-style-module__words--3dvQf",x="src-pages-Discovery-Recommendation-Searcher-Words-style-module__word--3m9gt";const b=function(e){var r=e.title,t=e.words,s=e.onWordClick;return(0,n.jsxs)("div",{className:v,children:[(0,n.jsx)("div",{className:h,children:r}),(0,n.jsx)("div",{className:y,children:null==t?void 0:t.map((function(e){return(0,n.jsx)("span",{className:x,onClick:function(){return s(e)},children:e},e)}))})]})};var g=t(9713),w=t.n(g),j=t(2512);const k={colors:"'~styles/colors.module.css'",tipsColor:"#bababa",borderColor:"#f5f5f5",root:"src-pages-Discovery-Recommendation-Searcher-SearchResult-Item-style-module__root--2vDe2",title:"src-pages-Discovery-Recommendation-Searcher-SearchResult-Item-style-module__title--yUaBt",item:"src-pages-Discovery-Recommendation-Searcher-SearchResult-Item-style-module__item--3Oqs3"};const _=function(e){var r=e.title,t=e.icon,s=e.data,o=e.renderLabel,a=e.onItemClick,i=void 0===a?j.Z:a;return(0,n.jsxs)("div",{className:k.root,children:[(0,n.jsxs)("div",{className:k.title,children:[(0,n.jsx)(c.J,{icon:t}),r]}),(0,n.jsx)("div",{className:k.content,children:s.map((function(e,r){return(0,n.jsx)("div",{className:k.item,onClick:function(){return i(e)},children:o(e)},r)}))})]})};var R=t(6663),S=t(4275),C=t(5749);const D="src-pages-Discovery-Recommendation-Searcher-SearchResult-style-module__empty--2usCJ";function O(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function Z(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?O(Object(t),!0).forEach((function(r){w()(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):O(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var I=s.useContext;const N=function(e){var r,t=e.data,s=I(S.vY),c=t.order,o={songs:{title:"单曲",icon:"music",renderLabel:function(e){return"".concat(e.name," - ").concat(e.artists.map((function(e){return e.name})).join(" / "))},onItemClick:(r=u()(a().mark((function e(r){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.picUrl){e.next=6;break}return e.next=4,R.Z.getAlbum(r.album.id);case 4:n=e.sent,t=null==n?void 0:n.album.blurPicUrl;case 6:s({type:S.aO.PLAY,payload:{musicId:r.id,music:(0,C.lk)(Z(Z({},r),{},{picUrl:t,duration:r.duration/1e3}))}});case 7:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},albums:{title:"专辑",icon:"headset",renderLabel:function(e){var r;return"".concat(e.name," - ").concat(null==e||null===(r=e.artist)||void 0===r?void 0:r.name)}},artists:{title:"歌手",icon:"person",renderLabel:function(e){return"".concat(e.name)}},mvs:{title:"视频",icon:"mobile-video",renderLabel:function(e){return"".concat(e.name," - ").concat(e.artistName)}}};return(0,n.jsxs)("div",{children:[null==c?void 0:c.map((function(e){var r=o[e],s=t[e];return r?(0,n.jsx)(_,Z(Z({},r),{},{data:s}),e):null})),!c&&(0,n.jsx)("div",{className:D,children:"没有结果喔"})]})};var P=t(4135),W=t(1904),H=t(743),L=t(7131),A=t(6773),U=(0,A.V)({key:"__searchHistory",defaultValue:A.P.ARRAY}),E=t(8098);const V={colors:"'~styles/colors.module.css'",borderColor:"#f5f5f5",constants:"'~styles/constants.module.css'",footerHeight:"60px",headerHeight:"50px",searcher:"src-pages-Discovery-Recommendation-Searcher-style-module__searcher--3qxgR",result:"src-pages-Discovery-Recommendation-Searcher-style-module__result--3gyvO",show:"src-pages-Discovery-Recommendation-Searcher-style-module__show--1QCZ1",searchInput:"src-pages-Discovery-Recommendation-Searcher-style-module__searchInput--3oLaG"};var J=s.useEffect,M=s.useState,Q=s.useMemo,Y=s.useRef;const q=function(){var e,r=(0,m.k6)(),t=(0,H.Z)(),s=Y(null),o=Y(null),i=M(!1),l=d()(i,2),f=l[0],v=l[1],h=M(t.keyword||""),y=d()(h,2),x=y[0],g=y[1],w=(0,P.Z)(L.Z.searchHot),k=d()(w,2),_=k[0],R=k[1],S=(0,P.Z)(L.Z.searchSuggest),C=d()(S,2),D=C[0],O=C[1],Z=D.value;J((function(){R()}),[]),(0,W.Z)(s,(function(){return v(!1)}));var I=function(){var e=u()(a().mark((function e(r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=3;break}return e.next=3,O({keywords:r});case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),A=function(e){var t;r.push("".concat(E.Z.SEARCH,"?keyword=").concat(e)),function(e){if(e=e.trim()){var r=U.getItem(),t=(r=r.slice(0,10)).findIndex((function(r){return r===e}));t>-1&&r.splice(t,1),r.unshift(e),U.setItem(r)}}(e),v(!1),null===(t=o.current)||void 0===t||t.blur()},q=function(){var e=u()(a().mark((function e(r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==r.key){e.next=4;break}if(x.trim()){e.next=3;break}return e.abrupt("return");case 3:A(x);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),F=function(e){A(e),g(e)},z=Q((function(){return(0,j.D)(I,500)}),[]);return(0,n.jsxs)("div",{className:V.root,ref:function(e){return s.current=e},children:[(0,n.jsxs)("div",{className:V.searcher,children:[(0,n.jsx)(c.J,{icon:"search",iconSize:14}),(0,n.jsx)("input",{ref:function(e){return o.current=e},placeholder:"搜索",value:x,onFocus:function(){return v(!0)},onChange:function(e){var r=e.target.value;g(r),z(r)},onKeyPress:q})]}),(0,n.jsx)("div",{className:p()(V.result,f&&V.show),children:Z&&x?(0,n.jsx)(N,{data:Z}):(0,n.jsxs)("div",{children:[(0,n.jsx)(b,{title:"热门搜索",words:null===(e=_.value)||void 0===e?void 0:e.map((function(e){return e.first})),onWordClick:F}),(0,n.jsx)(b,{title:"搜索历史",words:U.getItem(),onWordClick:F})]})})]})},F="src-pages-Discovery-Recommendation-style-module__root--30wR0",z="src-pages-Discovery-Recommendation-style-module__operations--2Vw7W";const B=function(){return(0,n.jsx)("div",{className:F,children:(0,n.jsx)("div",{className:z,children:(0,n.jsx)(q,{})})})}}}]);